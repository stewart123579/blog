<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Copying images from EPUBs | SVW Thunk'd</title><meta name=keywords content="emacs,emacs-config,ebooks,100daysToOffload"><meta name=description content="I was reading a book this week and I wanted to use one of the images in a
presentation."><meta name=author content="Stewart V. Wright"><link rel=canonical href=https://stewart123579.github.io/blog/posts/emacs/copying-images-from-epubs/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.min.b4e19c453811e60acfec1f00c15ac2be1c53f6ab90187e684358ce7faaf48bab.css integrity="sha256-tOGcRTgR5grP7B8AwVrCvhxT9quQGH5oQ1jOf6r0i6s=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/blog/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://stewart123579.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://stewart123579.github.io/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://stewart123579.github.io/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://stewart123579.github.io/blog/apple-touch-icon.png><link rel=mask-icon href=https://stewart123579.github.io/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=canonical href=https://stewart123579.github.io/blog/posts/emacs/copying-images-from-epubs/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.4.0/css/lightgallery-bundle.min.css integrity="sha512-91yJwfiGTCo9TM74ZzlAIAN4Eh5EWHpQJUfvo/XhpH6lzQtiRFkFRW1W+JSg4ch4XW3/xzh+dY4TOw/ILpavQA==" crossorigin=anonymous referrerpolicy=no-referrer><style>.flex-container{display:flex;flex-flow:row wrap;justify-content:space-around}</style><meta property="og:title" content="Copying images from EPUBs"><meta property="og:description" content="I was reading a book this week and I wanted to use one of the images in a
presentation."><meta property="og:type" content="article"><meta property="og:url" content="https://stewart123579.github.io/blog/posts/emacs/copying-images-from-epubs/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-25T00:00:00+10:00"><meta property="article:modified_time" content="2022-08-25T00:00:00+10:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Copying images from EPUBs"><meta name=twitter:description content="I was reading a book this week and I wanted to use one of the images in a
presentation."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://stewart123579.github.io/blog/posts/"},{"@type":"ListItem","position":2,"name":"Copying images from EPUBs","item":"https://stewart123579.github.io/blog/posts/emacs/copying-images-from-epubs/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Copying images from EPUBs","name":"Copying images from EPUBs","description":"I was reading a book this week and I wanted to use one of the images in a presentation.\n","keywords":["emacs","emacs-config","ebooks","100daysToOffload"],"articleBody":"I was reading a book this week and I wanted to use one of the images in a presentation.\nI’m, unsurprisingly, using Emacs to read the book. So I hit ? to see what options I had - but there was not one for saving images.\nI used my DDG-foo1 to search for “emacs nov.el extract images from epub” and found a reddit link suggesting raising an issue. The current repo for nov.el doesn’t have a way to raise issues, so I went to the archived GitHub repo. Issue 20 addressed my question - and it included code!\nSo, I’ve added the following function (from that GitHub issue) to my Emacs configuration:\n(defun other/extract-image-at-point () (interactive) (let ((image-spec (plist-get (text-properties-at (point)) 'display))) (when (or (not image-spec) (not (eq (car-safe image-spec) 'image))) (user-error \"No image at point\")) (cond ((memq :file image-spec) (let* ((source (plist-get (cdr image-spec) :file)) (default-file (file-name-nondirectory source)) (prompt (format \"Save %s at \" default-file)) (dest (expand-file-name (read-file-name prompt)))) (when (file-directory-p dest) (setq dest (expand-file-name default-file dest))) (copy-file source dest t) (message \"File saved at %s\" dest))) ((memq :data image-spec) (let* ((data (plist-get (cdr image-spec) :data)) (dest (expand-file-name (read-file-name \"Save at \")))) (with-temp-file dest (insert data)) (message \"File saved at %s\" dest))) (t (error \"Invalid image descriptor\"))))) and then extended the configuration for nov.el mode that I first discussed in my post Reading books in Emacs like so:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 (use-package nov :init (defun my-nov-font-setup () (face-remap-add-relative 'variable-pitch :family \"Liberation Serif\" :height 1.3) (setq fill-column (my-centre-width) nov-text-width (- fill-column 2) visual-fill-column-center-text t)) :bind (:map nov-mode-map (\"s\" . other/extract-image-at-point)) :hook ((nov-mode . my-nov-font-setup) (nov-mode . visual-line-mode) (nov-mode . visual-fill-column-mode))) (add-to-list 'auto-mode-alist '(\"\\\\.epub\\\\'\" . nov-mode)) The only difference is lines 8 and 9 where I bind (i.e. set) the key s to be the function defined above to extract and save the image.\nNow when I hit ? I see that s is defined to save the image, as show in the following:\nScreenshot: nov.el Help Yet another example of the power that you get when using Emacs. Try configuring any of your other daily tools that easily.\nDuckDuckGo-fu (AKA DDG-fu) is like google-fu, but for DuckDuckGo obviously. I couldn’t find any links to DDG-fu when I searched, so either my fu isn’t so good, or this might be the first page to use that term. I am hopeful, so feel free to link to this note as your reference! ↩︎\n","wordCount":"411","inLanguage":"en","datePublished":"2022-08-25T00:00:00+10:00","dateModified":"2022-08-25T00:00:00+10:00","author":[{"@type":"Person","name":"Stewart V. Wright"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://stewart123579.github.io/blog/posts/emacs/copying-images-from-epubs/"},"publisher":{"@type":"Organization","name":"SVW Thunk'd","logo":{"@type":"ImageObject","url":"https://stewart123579.github.io/blog/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://stewart123579.github.io/blog/ accesskey=h title="SVW Thunk'd (Alt + H)">SVW Thunk'd</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://stewart123579.github.io/blog/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://stewart123579.github.io/blog/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://stewart123579.github.io/blog/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://stewart123579.github.io/blog/archives/ title=Archive><span>Archive</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://stewart123579.github.io/blog/>Home</a>&nbsp;»&nbsp;<a href=https://stewart123579.github.io/blog/posts/>Posts</a></div><h1 class=post-title>Copying images from EPUBs</h1><div class=post-meta><span title='2022-08-25 00:00:00 +1000 AEST'>August 25, 2022</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Stewart V. Wright</div></header><div class=post-content><p>I was reading a book this week and I wanted to use one of the images in a
presentation.</p><p>I&rsquo;m, <em>unsurprisingly</em>, <a href=/blog/posts/emacs/reading-books-in-emacs/>using Emacs</a> to read
the book. So I hit <code>?</code> to see what options I had - but there was not one for
saving images.</p><p>I used my <a href="https://duckduckgo.com/?t=ffab&q=emacs+nov.el+extract+images+from+epub&atb=v310-1&ia=software">DDG-foo</a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> to search for <em>&ldquo;emacs nov.el extract images from
epub&rdquo;</em> and found a <a href=https://www.reddit.com/r/emacs/comments/70bnk2/is_there_a_way_to_copy_images_from_epubs_using/>reddit link</a> suggesting raising an issue. The <a href=https://depp.brause.cc/nov.el/>current repo</a> for
<code>nov.el</code> doesn&rsquo;t have a way to raise issues, so I went to the <a href=https://github.com/wasamasa/nov.el>archived GitHub
repo</a>. <a href=https://github.com/wasamasa/nov.el/issues/20>Issue 20</a> addressed my question - and it included code!</p><p>So, I&rsquo;ve added the following function (from that GitHub issue) to my Emacs configuration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elisp data-lang=elisp><span style=display:flex><span>(<span style=color:#a2f>defun</span> <span style=color:#b8860b>other/extract-image-at-point</span> ()
</span></span><span style=display:flex><span>  (<span style=color:#a2f>interactive</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a2f>let</span> ((<span style=color:#b8860b>image-spec</span> (<span style=color:#00a000>plist-get</span> (<span style=color:#00a000>text-properties-at</span> (<span style=color:#00a000>point</span>)) <span style=color:#b8860b>&#39;display</span>)))
</span></span><span style=display:flex><span>    (<span style=color:#a2f>when</span> (<span style=color:#a2f>or</span> (<span style=color:#b8860b>not</span> <span style=color:#b8860b>image-spec</span>) (<span style=color:#b8860b>not</span> (<span style=color:#00a000>eq</span> (<span style=color:#00a000>car-safe</span> <span style=color:#b8860b>image-spec</span>) <span style=color:#b8860b>&#39;image</span>)))
</span></span><span style=display:flex><span>      (<span style=color:#d2413a;font-weight:700>user-error</span> <span style=color:#b44>&#34;No image at point&#34;</span>))
</span></span><span style=display:flex><span>    (<span style=color:#a2f>cond</span>
</span></span><span style=display:flex><span>     ((<span style=color:#00a000>memq</span> <span style=color:#a2f>:file</span> <span style=color:#b8860b>image-spec</span>)
</span></span><span style=display:flex><span>      (<span style=color:#a2f>let*</span> ((<span style=color:#b8860b>source</span> (<span style=color:#00a000>plist-get</span> (<span style=color:#00a000>cdr</span> <span style=color:#b8860b>image-spec</span>) <span style=color:#a2f>:file</span>))
</span></span><span style=display:flex><span>             (<span style=color:#b8860b>default-file</span> (<span style=color:#00a000>file-name-nondirectory</span> <span style=color:#b8860b>source</span>))
</span></span><span style=display:flex><span>             (<span style=color:#b8860b>prompt</span> (<span style=color:#00a000>format</span> <span style=color:#b44>&#34;Save %s at &#34;</span> <span style=color:#b8860b>default-file</span>))
</span></span><span style=display:flex><span>             (<span style=color:#b8860b>dest</span> (<span style=color:#00a000>expand-file-name</span> (<span style=color:#b8860b>read-file-name</span> <span style=color:#b8860b>prompt</span>))))
</span></span><span style=display:flex><span>        (<span style=color:#a2f>when</span> (<span style=color:#00a000>file-directory-p</span> <span style=color:#b8860b>dest</span>)
</span></span><span style=display:flex><span>          (<span style=color:#a2f>setq</span> <span style=color:#b8860b>dest</span> (<span style=color:#00a000>expand-file-name</span> <span style=color:#b8860b>default-file</span> <span style=color:#b8860b>dest</span>)))
</span></span><span style=display:flex><span>        (<span style=color:#00a000>copy-file</span> <span style=color:#b8860b>source</span> <span style=color:#b8860b>dest</span> <span style=color:#800>t</span>)
</span></span><span style=display:flex><span>        (<span style=color:#00a000>message</span> <span style=color:#b44>&#34;File saved at %s&#34;</span> <span style=color:#b8860b>dest</span>)))
</span></span><span style=display:flex><span>     ((<span style=color:#00a000>memq</span> <span style=color:#a2f>:data</span> <span style=color:#b8860b>image-spec</span>)
</span></span><span style=display:flex><span>      (<span style=color:#a2f>let*</span> ((<span style=color:#b8860b>data</span> (<span style=color:#00a000>plist-get</span> (<span style=color:#00a000>cdr</span> <span style=color:#b8860b>image-spec</span>) <span style=color:#a2f>:data</span>))
</span></span><span style=display:flex><span>             (<span style=color:#b8860b>dest</span> (<span style=color:#00a000>expand-file-name</span> (<span style=color:#b8860b>read-file-name</span> <span style=color:#b44>&#34;Save at &#34;</span>))))
</span></span><span style=display:flex><span>        (<span style=color:#a2f>with-temp-file</span> <span style=color:#b8860b>dest</span>
</span></span><span style=display:flex><span>          (<span style=color:#00a000>insert</span> <span style=color:#b8860b>data</span>))
</span></span><span style=display:flex><span>        (<span style=color:#00a000>message</span> <span style=color:#b44>&#34;File saved at %s&#34;</span> <span style=color:#b8860b>dest</span>)))
</span></span><span style=display:flex><span>     (<span style=color:#800>t</span> (<span style=color:#d2413a;font-weight:700>error</span> <span style=color:#b44>&#34;Invalid image descriptor&#34;</span>)))))
</span></span></code></pre></div><p>and then extended the configuration for <code>nov.el</code> mode that I first discussed in
my post <a href=/blog/posts/emacs/reading-books-in-emacs/>Reading books in Emacs</a> like so:</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(<span style=color:#a2f>use-package</span> <span style=color:#b8860b>nov</span>
</span></span><span style=display:flex><span>  <span style=color:#a2f>:init</span> (<span style=color:#a2f>defun</span> <span style=color:#b8860b>my-nov-font-setup</span> ()
</span></span><span style=display:flex><span>          (<span style=color:#b8860b>face-remap-add-relative</span> <span style=color:#b8860b>&#39;variable-pitch</span> <span style=color:#a2f>:family</span> <span style=color:#b44>&#34;Liberation Serif&#34;</span>
</span></span><span style=display:flex><span>                                   <span style=color:#a2f>:height</span> <span style=color:#666>1.3</span>)
</span></span><span style=display:flex><span>          (<span style=color:#a2f>setq</span> <span style=color:#b8860b>fill-column</span> (<span style=color:#b8860b>my-centre-width</span>)
</span></span><span style=display:flex><span>                <span style=color:#b8860b>nov-text-width</span> (<span style=color:#00a000>-</span> <span style=color:#b8860b>fill-column</span> <span style=color:#666>2</span>)
</span></span><span style=display:flex><span>                <span style=color:#b8860b>visual-fill-column-center-text</span> <span style=color:#800>t</span>))
</span></span><span style=display:flex><span>  <span style=color:#a2f>:bind</span> (<span style=color:#a2f>:map</span> <span style=color:#b8860b>nov-mode-map</span>
</span></span><span style=display:flex><span>              (<span style=color:#b44>&#34;s&#34;</span> <span style=color:#666>.</span> <span style=color:#b8860b>other/extract-image-at-point</span>))
</span></span><span style=display:flex><span>  <span style=color:#a2f>:hook</span> ((<span style=color:#b8860b>nov-mode</span> <span style=color:#666>.</span> <span style=color:#b8860b>my-nov-font-setup</span>)
</span></span><span style=display:flex><span>         (<span style=color:#b8860b>nov-mode</span> <span style=color:#666>.</span> <span style=color:#b8860b>visual-line-mode</span>)
</span></span><span style=display:flex><span>         (<span style=color:#b8860b>nov-mode</span> <span style=color:#666>.</span> <span style=color:#b8860b>visual-fill-column-mode</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#b8860b>add-to-list</span> <span style=color:#b8860b>&#39;auto-mode-alist</span> <span style=color:#666>&#39;</span>(<span style=color:#b44>&#34;\\.epub\\&#39;&#34;</span> <span style=color:#666>.</span> <span style=color:#b8860b>nov-mode</span>))
</span></span></code></pre></td></tr></table></div></div><p>The only difference is lines 8 and 9 where I bind (i.e. set) the key <code>s</code> to be
the function defined above to extract and save the image.</p><p>Now when I hit <code>?</code> I see that <code>s</code> is defined to save the image, as show in the
following:</p><figure><img loading=lazy src=nov.el-help.png><figcaption>Screenshot: nov.el Help</figcaption></figure><p>Yet another example of the power that you get when using Emacs. Try configuring
any of your other daily tools that easily.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><em>DuckDuckGo-fu</em> (AKA <code>DDG-fu</code>) is like <a href=https://en.wiktionary.org/wiki/Google-fu>google-fu</a>, but for <a href=https://duckduckgo.com/>DuckDuckGo</a>
obviously. I couldn&rsquo;t find any links to <code>DDG-fu</code> when I searched, so either my
<em>fu</em> isn&rsquo;t so good, or this might be the first page to use that term. I am
hopeful, so feel free to link to this note as your reference!&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://stewart123579.github.io/blog/tags/emacs/>Emacs</a></li><li><a href=https://stewart123579.github.io/blog/tags/emacs-config/>My Emacs configuration</a></li><li><a href=https://stewart123579.github.io/blog/tags/ebooks/>ebooks</a></li><li><a href=https://stewart123579.github.io/blog/tags/100daystooffload/>100daysToOffload</a></li></ul><nav class=paginav><a class=prev href=https://stewart123579.github.io/blog/posts/psa-re-encode-your-mov-files/><span class=title>« Prev Page</span><br><span>PSA - re-encode your MOV files</span></a>
<a class=next href=https://stewart123579.github.io/blog/posts/book-week-2022/><span class=title>Next Page »</span><br><span>Book Week 2022</span></a></nav></footer></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><footer class=footer><span>&copy; 2023 <a href=https://stewart123579.github.io/blog/>SVW Thunk'd</a></span>
<span>|
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> |
<a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a> |
<a href=https://www.gnu.org/software/emacs/ rel=noopener target=_blank>Emacs</a> |
<a href=https://orgmode.org/ rel=noopener target=_blank>Org Mode</a> |
<a href=https://ox-hugo.scripter.co/ rel=noopener target=_blank>ox-hugo</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>