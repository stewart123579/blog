<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Using Mastodon for blog comments | SVW Thunk'd</title><meta name=keywords content="100daysToOffload,hugo"><meta name=description content="I&rsquo;ve decided to use the fediverse for blog comments, rather than disqus.  Here&rsquo;s how I did it."><meta name=author content="Stewart V. Wright"><link rel=canonical href=https://stewart123579.github.io/blog/posts/using-mastodon-for-blog-comments/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.min.b4e19c453811e60acfec1f00c15ac2be1c53f6ab90187e684358ce7faaf48bab.css integrity="sha256-tOGcRTgR5grP7B8AwVrCvhxT9quQGH5oQ1jOf6r0i6s=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/blog/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://stewart123579.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://stewart123579.github.io/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://stewart123579.github.io/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://stewart123579.github.io/blog/apple-touch-icon.png><link rel=mask-icon href=https://stewart123579.github.io/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet type=text/css href=https://stewart123579.github.io/blog/css/mastodon.css><link rel=canonical href=https://stewart123579.github.io/blog/posts/using-mastodon-for-blog-comments/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.4.0/css/lightgallery-bundle.min.css integrity="sha512-91yJwfiGTCo9TM74ZzlAIAN4Eh5EWHpQJUfvo/XhpH6lzQtiRFkFRW1W+JSg4ch4XW3/xzh+dY4TOw/ILpavQA==" crossorigin=anonymous referrerpolicy=no-referrer><style>.flex-container{display:flex;flex-flow:row wrap;justify-content:space-around}</style><meta property="og:title" content="Using Mastodon for blog comments"><meta property="og:description" content="I&rsquo;ve decided to use the fediverse for blog comments, rather than disqus.  Here&rsquo;s how I did it."><meta property="og:type" content="article"><meta property="og:url" content="https://stewart123579.github.io/blog/posts/using-mastodon-for-blog-comments/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-04-24T00:00:00+10:00"><meta property="article:modified_time" content="2023-04-24T00:00:00+10:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Using Mastodon for blog comments"><meta name=twitter:description content="I&rsquo;ve decided to use the fediverse for blog comments, rather than disqus.  Here&rsquo;s how I did it."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://stewart123579.github.io/blog/posts/"},{"@type":"ListItem","position":2,"name":"Using Mastodon for blog comments","item":"https://stewart123579.github.io/blog/posts/using-mastodon-for-blog-comments/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Using Mastodon for blog comments","name":"Using Mastodon for blog comments","description":"I\u0026rsquo;ve decided to use the fediverse for blog comments, rather than disqus.  Here\u0026rsquo;s how I did it.","keywords":["100daysToOffload","hugo"],"articleBody":"I’ve decided to use the fediverse for blog comments, rather than disqus.\nI was motivated by seeing a post by Veronica Olsen (yay! Another physicist!) which referenced Carl Schwan’s article and then lead me to Unixorn’s work.\nI’ve modified Unixorn’s work slightly by doing the following.\nUpdates 2023/04/25 Unixorn has updated the partial / partials discussed in Use existing capabilities 2023/04/25 Remove absolute path to DOMPurify in layouts/partials/mastodon/mastodon.html Use existing capabilities Firstly, I use layouts/partials rather than layouts/partial (note the trailing s). I’m not sure if that is a typo in the article or not.\nRather than creating layouts/default/single.html, I leveraged the existing file.\nI created layouts/partials/mastodon/head.html to reference the style sheet\n\u003clink rel=\"stylesheet\" type=\"text/css\" href=\"{{.Site.BaseURL}}css/mastodon.css\" /\u003e I then added (or created if you don’t already have it) the following to layouts/partials/extend_head.html\n{{ if .Params.comments.id }} {{ partial \"mastodon/head.html\" . }} {{ end }} What this does is it only includes a reference to the mastodon.css if I have the commends.id variable defined.\nTo include comments I then created layouts/partials/comments.html with the content:\n{{ if .Params.comments.id }} \u003cdiv\u003e {{ partial \"mastodon/mastodon.html\" .}} \u003c/div\u003e {{ end }} As before, if comments.id exists, then include the mastodon/mastodon.html partial Unixorn discusses.\nRemove absolute path to DOMPurify When I used Unixorn’s code for mastodon.html code and tested locally everything worked, so I deployed to my https://stewart123579.github.io/blog site.\nHowever, there’s a wrinkle.\nMy base URL ends in /blog/, but the code for mastodon.html references /assets/js/purify.min.js and with that leading / my base URL drops the /blog/ breaking the display of comments.\nIt’s easy with Hugo to get the relative URL of a file and fix mastodon.html, all we do is remove the leading / and call the relURL function:\n\u003cscript src=\"{{ relURL \"assets/js/purify.min.js\" }}\"\u003e\u003c/script\u003e The revised version of mastodon.html is below:\n{{ with .Params.comments }} \u003cdiv class=\"article-content\"\u003e \u003ch2\u003eComments\u003c/h2\u003e \u003cp\u003eYou can use your Mastodon account to reply to this\u003ca class=\"button\" href=\"https://{{ .host }}/@{{ .username }}/{{ .id }}\"\u003epost\u003c/a\u003e.\u003c/p\u003e \u003cp\u003e\u003cbutton class=\"button\" id=\"replyButton\" href=\"https://{{ .host }}/@{{ .username }}/{{ .id }}\"\u003eReply\u003c/button\u003e\u003c/p\u003e \u003cdialog id=\"toot-reply\" class=\"mastodon\" data-component=\"dialog\"\u003e \u003ch3\u003eReply to {{ .username }}'s post\u003c/h3\u003e \u003cp\u003e With an account on the Fediverse or Mastodon, you can respond to this post. Since Mastodon is decentralized, you can use your existing account hosted by another Mastodon server or compatible platform if you don't have an account on this one. \u003c/p\u003e \u003cp\u003eCopy and paste this URL into the search field of your favourite Fediverse app or the web interface of your Mastodon server.\u003c/p\u003e \u003cdiv class=\"copypaste\"\u003e \u003cinput type=\"text\" readonly=\"\" value=\"https://{{ .host }}/@{{ .username }}/{{ .id }}\"\u003e \u003cbutton class=\"button\" id=\"copyButton\"\u003eCopy\u003c/button\u003e \u003cbutton class=\"button\" id=\"cancelButton\"\u003eClose\u003c/button\u003e \u003c/div\u003e \u003c/dialog\u003e \u003cp id=\"mastodon-comments-list\"\u003e\u003cbutton id=\"load-comment\" class=\"button\"\u003eLoad comments\u003c/button\u003e\u003c/p\u003e \u003cnoscript\u003e\u003cp\u003eYou need JavaScript to view the comments.\u003c/p\u003e\u003c/noscript\u003e \u003cscript src=\"{{ relURL \"assets/js/purify.min.js\" }}\"\u003e\u003c/script\u003e \u003cscript type=\"text/javascript\"\u003e const dialog = document.querySelector('dialog'); document.getElementById('replyButton').addEventListener('click', () =\u003e { dialog.showModal(); }); document.getElementById('copyButton').addEventListener('click', () =\u003e { navigator.clipboard.writeText('https://{{ .host }}/@{{ .username }}/{{ .id }}'); }); document.getElementById('cancelButton').addEventListener('click', () =\u003e { dialog.close(); }); dialog.addEventListener('keydown', e =\u003e { if (e.key === 'Escape') dialog.close(); }); const dateOptions = { year: \"numeric\", month: \"numeric\", day: \"numeric\", hour: \"numeric\", minute: \"numeric\", }; function escapeHtml(unsafe) { return unsafe .replace(/\u0026/g, \"\u0026amp;\") .replace(/","wordCount":"806","inLanguage":"en","datePublished":"2023-04-24T00:00:00+10:00","dateModified":"2023-04-24T00:00:00+10:00","author":[{"@type":"Person","name":"Stewart V. Wright"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://stewart123579.github.io/blog/posts/using-mastodon-for-blog-comments/"},"publisher":{"@type":"Organization","name":"SVW Thunk'd","logo":{"@type":"ImageObject","url":"https://stewart123579.github.io/blog/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://stewart123579.github.io/blog/ accesskey=h title="SVW Thunk'd (Alt + H)">SVW Thunk'd</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://stewart123579.github.io/blog/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://stewart123579.github.io/blog/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://stewart123579.github.io/blog/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://stewart123579.github.io/blog/archives/ title=Archive><span>Archive</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://stewart123579.github.io/blog/>Home</a>&nbsp;»&nbsp;<a href=https://stewart123579.github.io/blog/posts/>Posts</a></div><h1 class=post-title>Using Mastodon for blog comments</h1><div class=post-meta><span title='2023-04-24 00:00:00 +1000 AEST'>April 24, 2023</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Stewart V. Wright</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#updates aria-label=Updates>Updates</a></li><li><a href=#use-existing-capabilities aria-label="Use existing capabilities">Use existing capabilities</a></li><li><a href=#remove-absolute-path-to-dompurify aria-label="Remove absolute path to DOMPurify">Remove absolute path to DOMPurify</a></li><li><a href=#add-dark-mode-to-the-css aria-label="Add dark mode to the CSS">Add dark mode to the CSS</a></li><li><a href=#usage aria-label=Usage>Usage</a></li><li><a href=#next aria-label=Next>Next</a></li></ul></div></details></div><div class=post-content><p>I&rsquo;ve decided to use the fediverse for blog comments, rather than disqus.</p><p>I was motivated by seeing a post by <a href=https://mastodon.online/@veronica/110035145753110132>Veronica Olsen</a> (yay! Another physicist!) which referenced <a href=https://carlschwan.eu/2020/12/29/adding-comments-to-your-static-blog-with-mastodon/>Carl Schwan</a>&rsquo;s article and then lead me to <a href=https://unixorn.github.io/post/2023-03-blog-comments-via-mastodon/>Unixorn</a>&rsquo;s work.</p><p>I&rsquo;ve modified <a href=https://unixorn.github.io/post/2023-03-blog-comments-via-mastodon/>Unixorn</a>&rsquo;s work slightly by doing the following.</p><hr><h2 id=updates>Updates<a hidden class=anchor aria-hidden=true href=#updates>#</a></h2><dl><dt>2023/04/25</dt><dd>Unixorn has updated the <code>partial</code> / <code>partials</code> discussed in <a href=#use-existing-capabilities>Use existing capabilities</a></dd><dt>2023/04/25</dt><dd><a href=#remove-absolute-path-to-dompurify>Remove absolute path to DOMPurify</a> in <code>layouts/partials/mastodon/mastodon.html</code></dd></dl><hr><h2 id=use-existing-capabilities>Use existing capabilities<a hidden class=anchor aria-hidden=true href=#use-existing-capabilities>#</a></h2><p>Firstly, I use <code>layouts/partials</code> rather than <code>layouts/partial</code> (note the trailing <code>s</code>). I&rsquo;m not sure if that is a typo in the article or not.</p><p>Rather than creating <code>layouts/default/single.html</code>, I leveraged the existing file.</p><p>I created <code>layouts/partials/mastodon/head.html</code> to reference the style sheet</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:green;font-weight:700>link</span> <span style=color:#b44>rel</span><span style=color:#666>=</span><span style=color:#b44>&#34;stylesheet&#34;</span> <span style=color:#b44>type</span><span style=color:#666>=</span><span style=color:#b44>&#34;text/css&#34;</span> <span style=color:#b44>href</span><span style=color:#666>=</span><span style=color:#b44>&#34;{{.Site.BaseURL}}css/mastodon.css&#34;</span> /&gt;
</span></span></code></pre></div><p>I then added (or created if you don&rsquo;t already have it) the following to <code>layouts/partials/extend_head.html</code></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#080;font-style:italic>&lt;!-- Mastodon comments --&gt;</span>
</span></span><span style=display:flex><span>{{ if .Params.comments.id }}
</span></span><span style=display:flex><span>{{ partial &#34;mastodon/head.html&#34; . }}
</span></span><span style=display:flex><span>{{ end }}
</span></span></code></pre></div><p>What this does is it only includes a reference to the <code>mastodon.css</code> if I have the <code>commends.id</code> variable defined.</p><p>To include comments I then created <code>layouts/partials/comments.html</code> with the content:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ if .Params.comments.id }}
</span></span><span style=display:flex><span>&lt;<span style=color:green;font-weight:700>div</span>&gt;
</span></span><span style=display:flex><span>  {{ partial &#34;mastodon/mastodon.html&#34; .}}
</span></span><span style=display:flex><span>&lt;/<span style=color:green;font-weight:700>div</span>&gt;
</span></span><span style=display:flex><span>{{ end }}
</span></span></code></pre></div><p>As before, if <code>comments.id</code> exists, then include the <code>mastodon/mastodon.html</code> partial Unixorn discusses.</p><h2 id=remove-absolute-path-to-dompurify>Remove absolute path to DOMPurify<a hidden class=anchor aria-hidden=true href=#remove-absolute-path-to-dompurify>#</a></h2><p>When I used <a href=https://unixorn.github.io/post/2023-03-blog-comments-via-mastodon/#installation>Unixorn&rsquo;s code</a> for <code>mastodon.html</code> code and tested locally everything worked, so I deployed to my <a href=https://stewart123579.github.io/blog>https://stewart123579.github.io/blog</a> site.</p><p>However, there&rsquo;s a wrinkle.</p><p>My base URL ends in <code>/blog/</code>, but the code for <code>mastodon.html</code> references <code>/assets/js/purify.min.js</code> and with that leading <code>/</code> my base URL drops the <code>/blog/</code> breaking the display of comments.</p><p>It&rsquo;s easy with Hugo to get the <a href=https://gohugo.io/functions/relurl/>relative URL</a> of a file and fix <code>mastodon.html</code>, all we do is remove the leading <code>/</code> and call the <code>relURL</code> function:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:green;font-weight:700>script</span> <span style=color:#b44>src</span><span style=color:#666>=</span><span style=color:#b44>&#34;{{ relURL &#34;</span><span style=color:#b44>assets</span><span>/</span><span style=color:#b44>js</span><span>/</span><span style=color:#b44>purify</span><span>.</span><span style=color:#b44>min</span><span>.</span><span style=color:#b44>js</span><span>&#34;</span> <span>}}&#34;</span>&gt;&lt;/<span style=color:green;font-weight:700>script</span>&gt;
</span></span></code></pre></div><p>The revised version of <code>mastodon.html</code> is below:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ with .Params.comments }}
</span></span><span style=display:flex><span>&lt;<span style=color:green;font-weight:700>div</span> <span style=color:#b44>class</span><span style=color:#666>=</span><span style=color:#b44>&#34;article-content&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:green;font-weight:700>h2</span>&gt;Comments&lt;/<span style=color:green;font-weight:700>h2</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:green;font-weight:700>p</span>&gt;You can use your Mastodon account to reply to this&lt;<span style=color:green;font-weight:700>a</span> <span style=color:#b44>class</span><span style=color:#666>=</span><span style=color:#b44>&#34;button&#34;</span> <span style=color:#b44>href</span><span style=color:#666>=</span><span style=color:#b44>&#34;https://{{ .host }}/@{{ .username }}/{{ .id }}&#34;</span>&gt;post&lt;/<span style=color:green;font-weight:700>a</span>&gt;.&lt;/<span style=color:green;font-weight:700>p</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:green;font-weight:700>p</span>&gt;&lt;<span style=color:green;font-weight:700>button</span> <span style=color:#b44>class</span><span style=color:#666>=</span><span style=color:#b44>&#34;button&#34;</span> <span style=color:#b44>id</span><span style=color:#666>=</span><span style=color:#b44>&#34;replyButton&#34;</span> <span style=color:#b44>href</span><span style=color:#666>=</span><span style=color:#b44>&#34;https://{{ .host }}/@{{ .username }}/{{ .id }}&#34;</span>&gt;Reply&lt;/<span style=color:green;font-weight:700>button</span>&gt;&lt;/<span style=color:green;font-weight:700>p</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:green;font-weight:700>dialog</span> <span style=color:#b44>id</span><span style=color:#666>=</span><span style=color:#b44>&#34;toot-reply&#34;</span> <span style=color:#b44>class</span><span style=color:#666>=</span><span style=color:#b44>&#34;mastodon&#34;</span> <span style=color:#b44>data-component</span><span style=color:#666>=</span><span style=color:#b44>&#34;dialog&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:green;font-weight:700>h3</span>&gt;Reply to {{ .username }}&#39;s post&lt;/<span style=color:green;font-weight:700>h3</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:green;font-weight:700>p</span>&gt;
</span></span><span style=display:flex><span>      With an account on the Fediverse or Mastodon, you can respond to this post.
</span></span><span style=display:flex><span>      Since Mastodon is decentralized, you can use your existing account hosted by another Mastodon server or compatible platform if you don&#39;t have an account on this one.
</span></span><span style=display:flex><span>    &lt;/<span style=color:green;font-weight:700>p</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:green;font-weight:700>p</span>&gt;Copy and paste this URL into the search field of your favourite Fediverse app or the web interface of your Mastodon server.&lt;/<span style=color:green;font-weight:700>p</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:green;font-weight:700>div</span> <span style=color:#b44>class</span><span style=color:#666>=</span><span style=color:#b44>&#34;copypaste&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:green;font-weight:700>input</span> <span style=color:#b44>type</span><span style=color:#666>=</span><span style=color:#b44>&#34;text&#34;</span> <span style=color:#b44>readonly</span><span style=color:#666>=</span><span style=color:#b44>&#34;&#34;</span> <span style=color:#b44>value</span><span style=color:#666>=</span><span style=color:#b44>&#34;https://{{ .host }}/@{{ .username }}/{{ .id }}&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:green;font-weight:700>button</span> <span style=color:#b44>class</span><span style=color:#666>=</span><span style=color:#b44>&#34;button&#34;</span> <span style=color:#b44>id</span><span style=color:#666>=</span><span style=color:#b44>&#34;copyButton&#34;</span>&gt;Copy&lt;/<span style=color:green;font-weight:700>button</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:green;font-weight:700>button</span> <span style=color:#b44>class</span><span style=color:#666>=</span><span style=color:#b44>&#34;button&#34;</span> <span style=color:#b44>id</span><span style=color:#666>=</span><span style=color:#b44>&#34;cancelButton&#34;</span>&gt;Close&lt;/<span style=color:green;font-weight:700>button</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:green;font-weight:700>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:green;font-weight:700>dialog</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:green;font-weight:700>p</span> <span style=color:#b44>id</span><span style=color:#666>=</span><span style=color:#b44>&#34;mastodon-comments-list&#34;</span>&gt;&lt;<span style=color:green;font-weight:700>button</span> <span style=color:#b44>id</span><span style=color:#666>=</span><span style=color:#b44>&#34;load-comment&#34;</span> <span style=color:#b44>class</span><span style=color:#666>=</span><span style=color:#b44>&#34;button&#34;</span>&gt;Load comments&lt;/<span style=color:green;font-weight:700>button</span>&gt;&lt;/<span style=color:green;font-weight:700>p</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:green;font-weight:700>noscript</span>&gt;&lt;<span style=color:green;font-weight:700>p</span>&gt;You need JavaScript to view the comments.&lt;/<span style=color:green;font-weight:700>p</span>&gt;&lt;/<span style=color:green;font-weight:700>noscript</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:green;font-weight:700>script</span> <span style=color:#b44>src</span><span style=color:#666>=</span><span style=color:#b44>&#34;{{ relURL &#34;</span><span style=color:#b44>assets</span><span>/</span><span style=color:#b44>js</span><span>/</span><span style=color:#b44>purify</span><span>.</span><span style=color:#b44>min</span><span>.</span><span style=color:#b44>js</span><span>&#34;</span> <span>}}&#34;</span>&gt;&lt;/<span style=color:green;font-weight:700>script</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:green;font-weight:700>script</span> <span style=color:#b44>type</span><span style=color:#666>=</span><span style=color:#b44>&#34;text/javascript&#34;</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#a2f;font-weight:700>const</span> dialog <span style=color:#666>=</span> <span style=color:#a2f>document</span>.querySelector(<span style=color:#b44>&#39;dialog&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a2f>document</span>.getElementById(<span style=color:#b44>&#39;replyButton&#39;</span>).addEventListener(<span style=color:#b44>&#39;click&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>      dialog.showModal();
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a2f>document</span>.getElementById(<span style=color:#b44>&#39;copyButton&#39;</span>).addEventListener(<span style=color:#b44>&#39;click&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>      navigator.clipboard.writeText(<span style=color:#b44>&#39;https://{{ .host }}/@{{ .username }}/{{ .id }}&#39;</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a2f>document</span>.getElementById(<span style=color:#b44>&#39;cancelButton&#39;</span>).addEventListener(<span style=color:#b44>&#39;click&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>      dialog.close();
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dialog.addEventListener(<span style=color:#b44>&#39;keydown&#39;</span>, e =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a2f;font-weight:700>if</span> (e.key <span style=color:#666>===</span> <span style=color:#b44>&#39;Escape&#39;</span>) dialog.close();
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a2f;font-weight:700>const</span> dateOptions <span style=color:#666>=</span> {
</span></span><span style=display:flex><span>      year<span style=color:#666>:</span> <span style=color:#b44>&#34;numeric&#34;</span>,
</span></span><span style=display:flex><span>      month<span style=color:#666>:</span> <span style=color:#b44>&#34;numeric&#34;</span>,
</span></span><span style=display:flex><span>      day<span style=color:#666>:</span> <span style=color:#b44>&#34;numeric&#34;</span>,
</span></span><span style=display:flex><span>      hour<span style=color:#666>:</span> <span style=color:#b44>&#34;numeric&#34;</span>,
</span></span><span style=display:flex><span>      minute<span style=color:#666>:</span> <span style=color:#b44>&#34;numeric&#34;</span>,
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a2f;font-weight:700>function</span> escapeHtml(unsafe) {
</span></span><span style=display:flex><span>      <span style=color:#a2f;font-weight:700>return</span> unsafe
</span></span><span style=display:flex><span>           .replace(<span style=color:#b68>/&amp;/g</span>, <span style=color:#b44>&#34;&amp;amp;&#34;</span>)
</span></span><span style=display:flex><span>           .replace(<span style=color:#b68>/&lt;/g</span>, <span style=color:#b44>&#34;&amp;lt;&#34;</span>)
</span></span><span style=display:flex><span>           .replace(<span style=color:#b68>/&gt;/g</span>, <span style=color:#b44>&#34;&amp;gt;&#34;</span>)
</span></span><span style=display:flex><span>           .replace(<span style=color:#b68>/&#34;/g</span>, <span style=color:#b44>&#34;&amp;quot;&#34;</span>)
</span></span><span style=display:flex><span>           .replace(<span style=color:#b68>/&#39;/g</span>, <span style=color:#b44>&#34;&amp;#039;&#34;</span>);
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a2f>document</span>.getElementById(<span style=color:#b44>&#34;load-comment&#34;</span>).addEventListener(<span style=color:#b44>&#34;click&#34;</span>, <span style=color:#a2f;font-weight:700>function</span>() {
</span></span><span style=display:flex><span>      <span style=color:#a2f>document</span>.getElementById(<span style=color:#b44>&#34;load-comment&#34;</span>).innerHTML <span style=color:#666>=</span> <span style=color:#b44>&#34;Loading&#34;</span>;
</span></span><span style=display:flex><span>      fetch(<span style=color:#b44>&#39;https://{{ .host }}/api/v1/statuses/{{ .id }}/context&#39;</span>)
</span></span><span style=display:flex><span>        .then(<span style=color:#a2f;font-weight:700>function</span>(response) {
</span></span><span style=display:flex><span>          <span style=color:#a2f;font-weight:700>return</span> response.json();
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        .then(<span style=color:#a2f;font-weight:700>function</span>(data) {
</span></span><span style=display:flex><span>          <span style=color:#a2f;font-weight:700>if</span>(data[<span style=color:#b44>&#39;descendants&#39;</span>] <span style=color:#666>&amp;&amp;</span>
</span></span><span style=display:flex><span>             <span style=color:#a2f>Array</span>.isArray(data[<span style=color:#b44>&#39;descendants&#39;</span>]) <span style=color:#666>&amp;&amp;</span>
</span></span><span style=display:flex><span>            data[<span style=color:#b44>&#39;descendants&#39;</span>].length <span style=color:#666>&gt;</span> <span style=color:#666>0</span>) {
</span></span><span style=display:flex><span>              <span style=color:#a2f>document</span>.getElementById(<span style=color:#b44>&#39;mastodon-comments-list&#39;</span>).innerHTML <span style=color:#666>=</span> <span style=color:#b44>&#34;&#34;</span>;
</span></span><span style=display:flex><span>              data[<span style=color:#b44>&#39;descendants&#39;</span>].forEach(<span style=color:#a2f;font-weight:700>function</span>(reply) {
</span></span><span style=display:flex><span>                reply.account.display_name <span style=color:#666>=</span> escapeHtml(reply.account.display_name);
</span></span><span style=display:flex><span>                reply.account.reply_class <span style=color:#666>=</span> reply.in_reply_to_id <span style=color:#666>==</span> <span style=color:#b44>&#34;{{ .id }}&#34;</span> <span style=color:#666>?</span> <span style=color:#b44>&#34;reply-original&#34;</span> <span style=color:#666>:</span> <span style=color:#b44>&#34;reply-child&#34;</span>;
</span></span><span style=display:flex><span>                reply.account.emojis.forEach(emoji =&gt; {
</span></span><span style=display:flex><span>                  reply.account.display_name <span style=color:#666>=</span> reply.account.display_name.replace(<span style=color:#b44>`:</span><span style=color:#b68;font-weight:700>${</span>emoji.shortcode<span style=color:#b68;font-weight:700>}</span><span style=color:#b44>:`</span>,
</span></span><span style=display:flex><span>                    <span style=color:#b44>`&lt;img src=&#34;</span><span style=color:#b68;font-weight:700>${</span>escapeHtml(emoji.static_url)<span style=color:#b68;font-weight:700>}</span><span style=color:#b44>&#34; alt=&#34;Emoji </span><span style=color:#b68;font-weight:700>${</span>emoji.shortcode<span style=color:#b68;font-weight:700>}</span><span style=color:#b44>&#34; height=&#34;20&#34; width=&#34;20&#34; /&gt;`</span>);
</span></span><span style=display:flex><span>                });
</span></span><span style=display:flex><span>                mastodonComment <span style=color:#666>=</span>
</span></span><span style=display:flex><span>                  <span style=color:#b44>`&lt;div class=&#34;mastodon-wrapper&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                    &lt;div class=&#34;comment-level </span><span style=color:#b68;font-weight:700>${</span>reply.account.reply_class<span style=color:#b68;font-weight:700>}</span><span style=color:#b44>&#34;&gt;&lt;svg viewBox=&#34;0 0 32 32&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34; fill=&#34;none&#34; transform=&#34;rotate(180)&#34;&gt;&lt;g id=&#34;SVGRepo_bgCarrier&#34; stroke-width=&#34;0&#34;&gt;&lt;/g&gt;&lt;g id=&#34;SVGRepo_tracerCarrier&#34; stroke-linecap=&#34;round&#34; stroke-linejoin=&#34;round&#34;&gt;&lt;/g&gt;&lt;g id=&#34;SVGRepo_iconCarrier&#34;&gt; &lt;path stroke=&#34;#535358&#34; stroke-linecap=&#34;round&#34; stroke-linejoin=&#34;round&#34; stroke-width=&#34;2&#34; d=&#34;M5.608 12.526l7.04-6.454C13.931 4.896 16 5.806 16 7.546V11c13 0 11 16 11 16s-4-10-11-10v3.453c0 1.74-2.069 2.65-3.351 1.475l-7.04-6.454a2 2 0 010-2.948z&#34;&gt;&lt;/path&gt; &lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                    &lt;div class=&#34;mastodon-comment&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                     &lt;div class=&#34;avatar&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                       &lt;img src=&#34;</span><span style=color:#b68;font-weight:700>${</span>escapeHtml(reply.account.avatar_static)<span style=color:#b68;font-weight:700>}</span><span style=color:#b44>&#34; height=60 width=60 alt=&#34;&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                     &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                     &lt;div class=&#34;content&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                       &lt;div class=&#34;author&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                         &lt;a href=&#34;</span><span style=color:#b68;font-weight:700>${</span>reply.account.url<span style=color:#b68;font-weight:700>}</span><span style=color:#b44>&#34; rel=&#34;nofollow&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                           &lt;span&gt;</span><span style=color:#b68;font-weight:700>${</span>reply.account.display_name<span style=color:#b68;font-weight:700>}</span><span style=color:#b44>&lt;/span&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                           &lt;span class=&#34;disabled&#34;&gt;</span><span style=color:#b68;font-weight:700>${</span>escapeHtml(reply.account.acct)<span style=color:#b68;font-weight:700>}</span><span style=color:#b44>&lt;/span&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                         &lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                         &lt;a class=&#34;date&#34; href=&#34;</span><span style=color:#b68;font-weight:700>${</span>reply.uri<span style=color:#b68;font-weight:700>}</span><span style=color:#b44>&#34; rel=&#34;nofollow&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                           </span><span style=color:#b68;font-weight:700>${</span>reply.created_at.substr(<span style=color:#666>0</span>, <span style=color:#666>10</span>)<span style=color:#b68;font-weight:700>}</span><span style=color:#b44>
</span></span></span><span style=display:flex><span><span style=color:#b44>                         &lt;/a&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                       &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                       &lt;div class=&#34;mastodon-comment-content&#34;&gt;</span><span style=color:#b68;font-weight:700>${</span>reply.content<span style=color:#b68;font-weight:700>}</span><span style=color:#b44>&lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                     &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                   &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#b44>                  &lt;/div&gt;`</span>;
</span></span><span style=display:flex><span>                <span style=color:#a2f>document</span>.getElementById(<span style=color:#b44>&#39;mastodon-comments-list&#39;</span>).appendChild(DOMPurify.sanitize(mastodonComment, {<span style=color:#b44>&#39;RETURN_DOM_FRAGMENT&#39;</span><span style=color:#666>:</span> <span style=color:#a2f;font-weight:700>true</span>}));
</span></span><span style=display:flex><span>              });
</span></span><span style=display:flex><span>          } <span style=color:#a2f;font-weight:700>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a2f>document</span>.getElementById(<span style=color:#b44>&#39;mastodon-comments-list&#39;</span>).innerHTML <span style=color:#666>=</span> <span style=color:#b44>&#34;&lt;p&gt;No comments found&lt;/p&gt;&#34;</span>;
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>  &lt;/<span style=color:green;font-weight:700>script</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:green;font-weight:700>div</span>&gt;
</span></span><span style=display:flex><span>{{ end }}
</span></span></code></pre></div><h2 id=add-dark-mode-to-the-css>Add dark mode to the CSS<a hidden class=anchor aria-hidden=true href=#add-dark-mode-to-the-css>#</a></h2><p>I&rsquo;m not very good with CSS, so I hacked two changes into the CSS mentioned in the article.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#00f>dark</span> .<span style=color:#00f>mastodon-comment</span> {
</span></span><span style=display:flex><span>  <span style=color:#a2f;font-weight:700>background-color</span>: <span style=color:#666>#36383d</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.<span style=color:#00f>dark</span> .<span style=color:#00f>mastodon-comment</span> .<span style=color:#00f>disabled</span> {
</span></span><span style=display:flex><span>  <span style=color:#a2f;font-weight:700>color</span>: <span style=color:#666>#ad55fd</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Otherwise I couldn&rsquo;t see the discussions in my preferred dark theme.</p><h2 id=usage>Usage<a hidden class=anchor aria-hidden=true href=#usage>#</a></h2><p>I use <a href=https://ox-hugo.scripter.co/>ox-hugo</a> to export my blog posts from <a href=/tags/orgmode/>Org Mode</a>, so to replicate the <code>comments</code> stanza mentioned in the article, i.e.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>comments</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>host</span>:<span style=color:#bbb> </span>hachyderm.io<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>username</span>:<span style=color:#bbb> </span>unixorn<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>id</span>:<span style=color:#bbb> </span><span style=color:#666>110149495764332469</span><span style=color:#bbb>
</span></span></span></code></pre></div><p>I simply need to add the following <code>PROPERTIES</code> to my post in Org Mode</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-org data-lang=org><span style=display:flex><span><span style=color:#080;font-style:italic>:PROPERTIES:
</span></span></span><span style=display:flex><span><span style=color:#080;font-style:italic></span><span style=color:#080;font-weight:700>:EXPORT_HUGO_CUSTOM_FRONT_MATTER+: :comments.host     hachyderm.io
</span></span></span><span style=display:flex><span><span style=color:#080;font-weight:700>:EXPORT_HUGO_CUSTOM_FRONT_MATTER+: :comments.username unixorn
</span></span></span><span style=display:flex><span><span style=color:#080;font-weight:700>:EXPORT_HUGO_CUSTOM_FRONT_MATTER+: :comments.id       110149495764332469
</span></span></span><span style=display:flex><span><span style=color:#080;font-weight:700></span><span style=color:#080;font-style:italic>:END:</span>
</span></span></code></pre></div><h2 id=next>Next<a hidden class=anchor aria-hidden=true href=#next>#</a></h2><p>I&rsquo;m planning to move the <code>comments.host</code> and <code>comments.username</code> into my config.yaml so I don&rsquo;t need to replicate for each post. I&rsquo;ll update this post if I remember.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://stewart123579.github.io/blog/tags/100daystooffload/>100daysToOffload</a></li><li><a href=https://stewart123579.github.io/blog/tags/hugo/>hugo</a></li></ul><nav class=paginav><a class=prev href=https://stewart123579.github.io/blog/posts/emacs/emacs-on-windows-getting-tramp-to-work/><span class=title>« Prev Page</span><br><span>Emacs on Windows: Getting tramp to work</span></a>
<a class=next href=https://stewart123579.github.io/blog/posts/emacs/emacs-site-lisp-fix-for-macos/><span class=title>Next Page »</span><br><span>Emacs site-lisp fix for MacOS</span></a></nav></footer><div><div class=article-content><h2>Comments</h2><p>You can use your Mastodon account to reply to this<a class=button href=https://emacs.ch/@svw/110252617591218826>post</a>.</p><p><button class=button id=replyButton href=https://emacs.ch/@svw/110252617591218826>Reply</button></p><dialog id=toot-reply class=mastodon data-component=dialog><h3>Reply to svw's post</h3><p>With an account on the Fediverse or Mastodon, you can respond to this post.
Since Mastodon is decentralized, you can use your existing account hosted by another Mastodon server or compatible platform if you don't have an account on this one.</p><p>Copy and paste this URL into the search field of your favourite Fediverse app or the web interface of your Mastodon server.</p><div class=copypaste><input type=text readonly value=https://emacs.ch/@svw/110252617591218826>
<button class=button id=copyButton>Copy</button>
<button class=button id=cancelButton>Close</button></div></dialog><p id=mastodon-comments-list><button id=load-comment class=button>Load comments</button></p><noscript><p>You need JavaScript to view the comments.</p></noscript><script src=/blog/assets/js/purify.min.js></script>
<script type=text/javascript>const dialog=document.querySelector("dialog");document.getElementById("replyButton").addEventListener("click",()=>{dialog.showModal()}),document.getElementById("copyButton").addEventListener("click",()=>{navigator.clipboard.writeText("https://emacs.ch/@svw/110252617591218826")}),document.getElementById("cancelButton").addEventListener("click",()=>{dialog.close()}),dialog.addEventListener("keydown",e=>{e.key==="Escape"&&dialog.close()});const dateOptions={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"};function escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}document.getElementById("load-comment").addEventListener("click",function(){document.getElementById("load-comment").innerHTML="Loading",fetch("https://emacs.ch/api/v1/statuses/110252617591218826/context").then(function(e){return e.json()}).then(function(e){e.descendants&&Array.isArray(e.descendants)&&e.descendants.length>0?(document.getElementById("mastodon-comments-list").innerHTML="",e.descendants.forEach(function(e){e.account.display_name=escapeHtml(e.account.display_name),e.account.reply_class=e.in_reply_to_id=="110252617591218826"?"reply-original":"reply-child",e.account.emojis.forEach(t=>{e.account.display_name=e.account.display_name.replace(`:${t.shortcode}:`,`<img src="${escapeHtml(t.static_url)}" alt="Emoji ${t.shortcode}" height="20" width="20" />`)}),mastodonComment=`<div class="mastodon-wrapper">
                    <div class="comment-level ${e.account.reply_class}"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="none" transform="rotate(180)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path stroke="#535358" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.608 12.526l7.04-6.454C13.931 4.896 16 5.806 16 7.546V11c13 0 11 16 11 16s-4-10-11-10v3.453c0 1.74-2.069 2.65-3.351 1.475l-7.04-6.454a2 2 0 010-2.948z"></path> </g></svg></div>
                    <div class="mastodon-comment">
                     <div class="avatar">
                       <img src="${escapeHtml(e.account.avatar_static)}" height=60 width=60 alt="">
                     </div>
                     <div class="content">
                       <div class="author">
                         <a href="${e.account.url}" rel="nofollow">
                           <span>${e.account.display_name}</span>
                           <span class="disabled">${escapeHtml(e.account.acct)}</span>
                         </a>
                         <a class="date" href="${e.uri}" rel="nofollow">
                           ${e.created_at.substr(0,10)}
                         </a>
                       </div>
                       <div class="mastodon-comment-content">${e.content}</div>
                     </div>
                   </div>
                  </div>`,document.getElementById("mastodon-comments-list").appendChild(DOMPurify.sanitize(mastodonComment,{RETURN_DOM_FRAGMENT:!0}))})):document.getElementById("mastodon-comments-list").innerHTML="<p>No comments found</p>"})})</script></div></div></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><footer class=footer><span>&copy; 2023 <a href=https://stewart123579.github.io/blog/>SVW Thunk'd</a></span>
<span>|
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> |
<a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a> |
<a href=https://www.gnu.org/software/emacs/ rel=noopener target=_blank>Emacs</a> |
<a href=https://orgmode.org/ rel=noopener target=_blank>Org Mode</a> |
<a href=https://ox-hugo.scripter.co/ rel=noopener target=_blank>ox-hugo</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>