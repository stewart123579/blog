<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Counting tagged pages in Hugo | SVW Thunk'd</title><meta name=keywords content="hugo,100daysToOffload"><meta name=description content="I wanted to count the number of pages tagged 100daysToOffload but couldn&rsquo;t
find a simple solution."><meta name=author content="Stewart V. Wright"><link rel=canonical href=https://stewart123579.github.io/blog/posts/code/counting-tagged-pages-in-hugo/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.min.b4e19c453811e60acfec1f00c15ac2be1c53f6ab90187e684358ce7faaf48bab.css integrity="sha256-tOGcRTgR5grP7B8AwVrCvhxT9quQGH5oQ1jOf6r0i6s=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/blog/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://stewart123579.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://stewart123579.github.io/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://stewart123579.github.io/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://stewart123579.github.io/blog/apple-touch-icon.png><link rel=mask-icon href=https://stewart123579.github.io/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=canonical href=https://stewart123579.github.io/blog/posts/code/counting-tagged-pages-in-hugo/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.4.0/css/lightgallery-bundle.min.css integrity="sha512-91yJwfiGTCo9TM74ZzlAIAN4Eh5EWHpQJUfvo/XhpH6lzQtiRFkFRW1W+JSg4ch4XW3/xzh+dY4TOw/ILpavQA==" crossorigin=anonymous referrerpolicy=no-referrer><style>.flex-container{display:flex;flex-flow:row wrap;justify-content:space-around}</style><meta property="og:title" content="Counting tagged pages in Hugo"><meta property="og:description" content="I wanted to count the number of pages tagged 100daysToOffload but couldn&rsquo;t
find a simple solution."><meta property="og:type" content="article"><meta property="og:url" content="https://stewart123579.github.io/blog/posts/code/counting-tagged-pages-in-hugo/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-23T18:15:00+10:00"><meta property="article:modified_time" content="2022-05-23T18:15:00+10:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Counting tagged pages in Hugo"><meta name=twitter:description content="I wanted to count the number of pages tagged 100daysToOffload but couldn&rsquo;t
find a simple solution."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://stewart123579.github.io/blog/posts/"},{"@type":"ListItem","position":2,"name":"Code","item":"https://stewart123579.github.io/blog/posts/code/"},{"@type":"ListItem","position":3,"name":"Counting tagged pages in Hugo","item":"https://stewart123579.github.io/blog/posts/code/counting-tagged-pages-in-hugo/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Counting tagged pages in Hugo","name":"Counting tagged pages in Hugo","description":"I wanted to count the number of pages tagged 100daysToOffload but couldn\u0026rsquo;t find a simple solution.\n","keywords":["hugo","100daysToOffload"],"articleBody":"I wanted to count the number of pages tagged 100daysToOffload but couldn’t find a simple solution.\nHere are a couple of options that work. We create a shortcode and in your org file pass the wanted tag to it in the variable tagname, like so:\n@@hugo:{{\u003c tag-count tagname=\"MyWantedTag\" \u003e}}@@ The shortcode(s) Create a file layouts/shortcodes/tag-count.html and add the code below.\nPreferred approach My preferred approach is to use the existing .Site.Taxonomies variable:\n{{ len (.Site.Taxonomies.tags.Get (lower (.Get \"tagname\"))) }} What is happening here?\n(.Get \"tagname\") Returns the value of the variable tagname; in the above example this would be MyWantedTag (lower ...) Converts the result to lower case. Note that tags are always lower case (.Site.Taxonomies.tags.Get ...) Gets the list of pages that are tagged with the wanted term len ... Returns the length of the list of tagged pages, i.e. the number of pages with the wanted tag Alternative #1 - filter We can use the range function to loop over all of the tags and their values like this…\n{{ range $key, $value := .Site.Taxonomies.tags }} {{ if in $key (.Get \"tagname\") }} {{ len $value }} {{ end }} {{ end }} Alternative #2 - brute force The final option is based on this post where we loop over all the pages and increment a counter if we find a page with the right tag.\n{{ $.Scratch.Set \"tagCounter\" 0 }} {{ range .Site.RegularPages }} {{ if in .Params.tags $tagname }} {{ $.Scratch.Add \"tagCounter\" 1 }} {{ end }} {{ end }} {{ $.Scratch.Get \"tagCounter\" }} ","wordCount":"279","inLanguage":"en","datePublished":"2022-05-23T18:15:00+10:00","dateModified":"2022-05-23T18:15:00+10:00","author":[{"@type":"Person","name":"Stewart V. Wright"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://stewart123579.github.io/blog/posts/code/counting-tagged-pages-in-hugo/"},"publisher":{"@type":"Organization","name":"SVW Thunk'd","logo":{"@type":"ImageObject","url":"https://stewart123579.github.io/blog/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://stewart123579.github.io/blog/ accesskey=h title="SVW Thunk'd (Alt + H)">SVW Thunk'd</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://stewart123579.github.io/blog/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://stewart123579.github.io/blog/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://stewart123579.github.io/blog/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://stewart123579.github.io/blog/archives/ title=Archive><span>Archive</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://stewart123579.github.io/blog/>Home</a>&nbsp;»&nbsp;<a href=https://stewart123579.github.io/blog/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://stewart123579.github.io/blog/posts/code/>Code</a></div><h1 class=post-title>Counting tagged pages in Hugo</h1><div class=post-meta><span title='2022-05-23 18:15:00 +1000 AEST'>May 23, 2022</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Stewart V. Wright</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#the-shortcode--s aria-label="The shortcode(s)">The shortcode(s)</a><ul><li><a href=#preferred-approach aria-label="Preferred approach">Preferred approach</a></li><li><a href=#alternative-1-filter aria-label="Alternative #1 - filter">Alternative #1 - filter</a></li><li><a href=#alternative-2-brute-force aria-label="Alternative #2 - brute force">Alternative #2 - brute force</a></li></ul></li></ul></div></details></div><div class=post-content><p>I wanted to count the number of pages tagged <code>100daysToOffload</code> but couldn&rsquo;t
find a simple solution.</p><p>Here are a couple of options that work. We create a shortcode and in your org
file pass the wanted tag to it in the variable <code>tagname</code>, like so:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-org data-lang=org><span style=display:flex><span>@@hugo:{{&lt;<span style=color:#b44> tag-count tagname=&#34;MyWantedTag&#34; </span>&gt;}}@@
</span></span></code></pre></div><h2 id=the-shortcode--s>The shortcode(s)<a hidden class=anchor aria-hidden=true href=#the-shortcode--s>#</a></h2><p>Create a file <code>layouts/shortcodes/tag-count.html</code> and add the code below.</p><h3 id=preferred-approach>Preferred approach<a hidden class=anchor aria-hidden=true href=#preferred-approach>#</a></h3><p>My preferred approach is to use the existing <code>.Site.Taxonomies</code> variable:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ len (.Site.Taxonomies.tags.Get (lower (.Get &#34;tagname&#34;))) }}
</span></span></code></pre></div><p>What is happening here?</p><dl><dt><code>(.Get "tagname")</code></dt><dd>Returns the value of the variable <code>tagname</code>; in the
above example this would be <code>MyWantedTag</code></dd><dt><code>(lower ...)</code></dt><dd>Converts the result to lower case. <strong>Note</strong> that tags are
always lower case</dd><dt><code>(.Site.Taxonomies.tags.Get ...)</code></dt><dd>Gets the list of pages that are tagged with
the wanted term</dd><dt><code>len ...</code></dt><dd>Returns the length of the list of tagged pages, i.e. the number
of pages with the wanted tag</dd></dl><h3 id=alternative-1-filter>Alternative #1 - filter<a hidden class=anchor aria-hidden=true href=#alternative-1-filter>#</a></h3><p>We can use the <code>range</code> function to loop over all of the tags and their values
like this&mldr;</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ range $key, $value := .Site.Taxonomies.tags }}
</span></span><span style=display:flex><span>  {{ if in $key (.Get &#34;tagname&#34;) }}
</span></span><span style=display:flex><span>    {{ len $value }}
</span></span><span style=display:flex><span>  {{ end }}
</span></span><span style=display:flex><span>{{ end }}
</span></span></code></pre></div><h3 id=alternative-2-brute-force>Alternative #2 - brute force<a hidden class=anchor aria-hidden=true href=#alternative-2-brute-force>#</a></h3><p>The final option is based on <a href=https://discourse.gohugo.io/t/show-count-of-handpicked-categories-or-tags/2369/4>this post</a> where we loop over all the pages and
increment a counter if we find a page with the right tag.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#080;font-style:italic>&lt;!-- (re)set the counter to 0 --&gt;</span>
</span></span><span style=display:flex><span>{{ $.Scratch.Set &#34;tagCounter&#34; 0 }}
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic>&lt;!-- increment counter if post contains the wanted tag--&gt;</span>
</span></span><span style=display:flex><span>{{ range .Site.RegularPages }}
</span></span><span style=display:flex><span>  {{ if in .Params.tags $tagname }}
</span></span><span style=display:flex><span>    {{ $.Scratch.Add &#34;tagCounter&#34; 1 }}
</span></span><span style=display:flex><span>  {{ end }}
</span></span><span style=display:flex><span>{{ end }}
</span></span><span style=display:flex><span><span style=color:#080;font-style:italic>&lt;!-- Return the result --&gt;</span>
</span></span><span style=display:flex><span>{{ $.Scratch.Get &#34;tagCounter&#34; }}
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://stewart123579.github.io/blog/tags/hugo/>hugo</a></li><li><a href=https://stewart123579.github.io/blog/tags/100daystooffload/>100daysToOffload</a></li></ul><nav class=paginav><a class=prev href=https://stewart123579.github.io/blog/posts/code/my-screensaver/><span class=title>« Prev Page</span><br><span>My screensaver</span></a>
<a class=next href=https://stewart123579.github.io/blog/posts/emacs/including-equations-in-my-notes/><span class=title>Next Page »</span><br><span>Including equations in my notes</span></a></nav></footer></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><footer class=footer><span>&copy; 2023 <a href=https://stewart123579.github.io/blog/>SVW Thunk'd</a></span>
<span>|
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> |
<a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a> |
<a href=https://www.gnu.org/software/emacs/ rel=noopener target=_blank>Emacs</a> |
<a href=https://orgmode.org/ rel=noopener target=_blank>Org Mode</a> |
<a href=https://ox-hugo.scripter.co/ rel=noopener target=_blank>ox-hugo</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>